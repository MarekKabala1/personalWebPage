---
import RetroLayout from './RetroLayout.astro';
import Comments from '../components/Comments.astro';

export interface Props {
	frontmatter: {
		title: string;
		pubDate: string;
		image?: string;
	};
}

const { frontmatter } = Astro.props;
const postId = frontmatter.title.toLowerCase().replace(/[^a-z0-9]+/g, '-');
---

<RetroLayout title={frontmatter.title}>
	<article class='blog-post'>
		<div class='retro-window-title'>{frontmatter.title}</div>
		<div class='post-content'>
			<div class='post-date'>
				<small>Published on: {frontmatter.pubDate}</small>
			</div>

			<div class='blog-content'>
				<slot />
			</div>

			<div class='back-link'>
				<a href='/' class='retro-button'> üè† Back to Home </a>
			</div>

			<Comments postId={postId} />
		</div>
	</article>
</RetroLayout>

<style>
	.blog-post {
		composes: retro-window;
		margin: 20px;
	}

	.post-content {
		padding: 20px;
	}

	.post-date {
		margin-bottom: 20px;
	}

	.back-link {
		margin-top: 20px;
		text-align: center;
	}

	.blog-content {
		line-height: 1.6;
	}

	.blog-content :global(h1),
	.blog-content :global(h2),
	.blog-content :global(h3) {
		margin: 1em 0 0.5em;
	}

	.blog-content :global(p) {
		margin-bottom: 1em;
	}

	.blog-content :global(img) {
		max-width: 100%;
		height: auto;
		border: 2px solid var(--theme-border);
		margin: 1em 0;
	}

	.blog-content :global(code) {
		font-family: 'Courier New', monospace;
		background: #000;
		color: #0f0;
		padding: 0.2em 0.4em;
		border-radius: 3px;
	}

	.blog-content :global(pre) {
		background: #000;
		color: #0f0;
		padding: 1em;
		overflow-x: auto;
		border: 2px solid var(--theme-border);
		margin: 1em 0;
	}

	.blog-content :global(ul),
	.blog-content :global(ol) {
		margin: 1em 0;
		padding-left: 2em;
	}

	.blog-content :global(li) {
		margin: 0.5em 0;
	}
</style>
